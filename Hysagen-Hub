local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local player = game.Players.LocalPlayer
local userInputService = game:GetService("UserInputService")
local runService = game:GetService("RunService")
local players = game:GetService("Players")
local espEnabled = false
local speed = 0
local dragging = false
local dragging2 = false
local nameHighlightEnabled = false
local nameTags = {}
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local density = game.Lighting:FindFirstChild("Atmosphere"):FindFirstChild("Density")
local survivorsFolder
local killersFolder
local shsoftness = game.Lighting.ShadowSoftness

local function clearNameTags()
	for _, tag in pairs(nameTags) do
		if tag then tag:Destroy() end
	end
	nameTags = {}
end

local function createNameTag(model, color)
	if nameTags[model] then return end
	if model:IsA("Model") and model:FindFirstChild("HumanoidRootPart") then
		local billboard = Instance.new("BillboardGui")
		billboard.Name = "NameTag"
		billboard.Adornee = model:FindFirstChild("HumanoidRootPart")
		billboard.Size = UDim2.new(0, 100, 0, 30)
		billboard.StudsOffset = Vector3.new(0, 2.5, 0)
		billboard.AlwaysOnTop = true
		billboard.Parent = player:WaitForChild("PlayerGui")

		local textLabel = Instance.new("TextLabel")
		textLabel.BackgroundTransparency = 1
		textLabel.Size = UDim2.new(1, 0, 1, 0)
		textLabel.Font = Enum.Font.SourceSansBold
		textLabel.TextSize = 20
		textLabel.TextColor3 = color
		textLabel.TextStrokeTransparency = 0.4
		textLabel.Text = model.Name
		textLabel.Parent = billboard

		nameTags[model] = billboard
	end
end

local function updateNameTags()
	if not nameHighlightEnabled then return end

	survivorsFolder = survivorsFolder or (workspace.Players and workspace.Players:FindFirstChild("Survivors"))
	killersFolder = killersFolder or (workspace.Players and workspace.Players:FindFirstChild("Killers"))

	if survivorsFolder then
		for _, model in pairs(survivorsFolder:GetChildren()) do
			createNameTag(model, Color3.fromRGB(0, 168, 0)) -- синий для survivors
		end
	end

	if killersFolder then
		for _, model in pairs(killersFolder:GetChildren()) do
			createNameTag(model, Color3.fromRGB(139, 0, 0)) -- темно-красный для killers
		end
	end

	-- Удаляем nameTags для моделей, которых уже нет
	for model, tag in pairs(nameTags) do
		local inSurvivors = survivorsFolder and survivorsFolder:FindFirstChild(model.Name)
		local inKillers = killersFolder and killersFolder:FindFirstChild(model.Name)
		if not inSurvivors and not inKillers then
			tag:Destroy()
			nameTags[model] = nil
		end
	end
end

local function enableNameTags()
	nameHighlightEnabled = true
	clearNameTags()
	updateNameTags()
end

local function disableNameTags()
	nameHighlightEnabled = false
	clearNameTags()
end

local brightness = game.Lighting.Brightness

local function FB()
	game.Lighting.GlobalShadows = false
	game:GetService("Lighting").Brightness = 1
	game.Lighting.ShadowSoftness = 0
end

local function setupCharacter(character)
	local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
	local humanoid = character:WaitForChild("Humanoid")

	runService.RenderStepped:Connect(function(dt)
		if speed > 0 then
			local moveDir = humanoid.MoveDirection
			if moveDir.Magnitude > 0 then
				local inc = moveDir.Unit * speed * dt
				humanoidRootPart.CFrame = humanoidRootPart.CFrame + inc
			end
		end
	end)
end

local noclipEnabled = false

local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

RunService.Heartbeat:Connect(function()
	if noclipEnabled then
		character = player.Character or player.CharacterAdded:Wait()
	end
end)

function noclip()
	if noclipEnabled then
		for _, part in pairs(character:GetChildren()) do
			if part:IsA("BasePart") then
				part.CanCollide = false
			end
		end
	else
		for _, part in pairs(character:GetChildren()) do
			if part:IsA("BasePart") then
				part.CanCollide = true
			end
		end
	end
end

speeds = 1
tpwalking = nil
nowe = false

local speaker = game:GetService("Players").LocalPlayer

local chr = game.Players.LocalPlayer.Character
local hum = chr and chr:FindFirstChildWhichIsA("Humanoid")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SpeedControlGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 400, 0, 280)
frame.Position = UDim2.new(0.5, -175, 0.5, -90)
frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
frame.Active = true
local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0, 15)
uiCorner.Parent = frame
frame.Transparency = 0
local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 0, 0)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 255, 255))
}
gradient.Rotation = 45
gradient.Transparency = NumberSequence.new{
	NumberSequenceKeypoint.new(0, 0),
	NumberSequenceKeypoint.new(1, 0.1)
}

gradient.Parent = frame
gradientforALL = gradient:Clone()
gradientforALL.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(134, 134, 134))
}

-- пример изменения наклона градиента
gradientforALL.Rotation = 45 -- угол в градусах

-- можно также менять Transparency (прозрачность) градиента
gradientforALL.Transparency = NumberSequence.new{
	NumberSequenceKeypoint.new(0, 0), 
	NumberSequenceKeypoint.new(1, 0)
}

local lineframe = Instance.new("Frame", frame)
lineframe.Size = UDim2.new(0, 0.01, 0, 245)
lineframe.Position = UDim2.new(0, 90, 0, 30)
lineframe.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
lineframe.BorderColor3 = Color3.fromRGB(255, 255, 255)
lineframe.Transparency = 0.7

local lineframe1 = Instance.new("Frame", frame)
lineframe1.Size = UDim2.new(0, 398, 0, 0.01)
lineframe1.Position = UDim2.new(0, 0, 0, 28)
lineframe1.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
lineframe1.BorderColor3 = Color3.fromRGB(255, 255, 255)
lineframe1.Transparency = 0.7

local labelMADEBY = Instance.new("TextLabel", frame)
labelMADEBY.Size = UDim2.new(0, 200, 0, 25)
labelMADEBY.Position = UDim2.new(0, -15, 0, 1)
labelMADEBY.Text = "script by Hysagen Hub"
labelMADEBY.TextColor3 = Color3.fromRGB(255, 255, 255)
labelMADEBY.BackgroundTransparency = 1
labelMADEBY.TextSize = 10
local gradientLABEL = Instance.new("UIGradient")
gradientLABEL.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(176, 176, 176))
}

-- пример изменения наклона градиента
gradientLABEL.Rotation = 45 -- угол в градусах

-- можно также менять Transparency (прозрачность) градиента
gradientLABEL.Transparency = NumberSequence.new{
	NumberSequenceKeypoint.new(0, 0),
	NumberSequenceKeypoint.new(1, 0.3)
}
gradientLABEL.Parent = labelMADEBY
local Players = game:GetService("Players")
local avatarImageBACKGROUND = Instance.new("ImageButton", frame)
avatarImageBACKGROUND.Size = UDim2.new(0, 40, 0, 40)
avatarImageBACKGROUND.Position = UDim2.new(0, 2, 0, 200)
avatarImageBACKGROUND.BackgroundTransparency = 1
avatarImageBACKGROUND.Image = "rbxassetid://3570695787"
local avatarImage = Instance.new("ImageLabel", avatarImageBACKGROUND)
avatarImage.Size = UDim2.new(0, 40, 0, 40)
avatarImage.Position = UDim2.new(0, 0, 0, 0)
avatarImage.Image = Players:GetUserThumbnailAsync(player.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size100x100)
avatarImage.BackgroundTransparency = 1
local avacorner = Instance.new('UICorner', avatarImage)
avacorner.CornerRadius = UDim.new(1, 0)
local avatarImagegreen = Instance.new("ImageLabel", avatarImage)
avatarImagegreen.Size = UDim2.new(0, 10, 0, 10)
avatarImagegreen.Position = UDim2.new(0, 30, 0, 30)
avatarImagegreen.Image = "rbxassetid://3570695787"
avatarImagegreen.BackgroundTransparency = 1
avatarImagegreen.ImageColor3 = Color3.fromRGB(0, 255, 0)

local firstNickname = player.Name
local secondNickname = player.DisplayName
local laba = Instance.new("TextLabel", frame)
laba.Size = UDim2.new(1, -20, 0, 30)
laba.Position = UDim2.new(0, 2, 0, 245)
laba.BackgroundTransparency = 1
laba.TextColor3 = Color3.new(1, 1, 1)
laba.Font = Enum.Font.SourceSansBold
laba.TextSize = 15
laba.TextXAlignment = Enum.TextXAlignment.Left
laba.Text = firstNickname
laba.TextColor3 = Color3.fromRGB(124, 124, 124)

local laba2 = Instance.new("TextLabel", frame)
laba2.Size = UDim2.new(1, -20, 0, 30)
laba2.Position = UDim2.new(0, 2, 0, 230)
laba2.BackgroundTransparency = 1
laba2.TextColor3 = Color3.new(1, 1, 1)
laba2.Font = Enum.Font.SourceSansBold
laba2.TextSize = 15
laba2.TextXAlignment = Enum.TextXAlignment.Left
laba2.Text = secondNickname

local bar1 = Instance.new("Frame", frame)
bar1.Size = UDim2.new(0, 240, 0, 20)
bar1.Position = UDim2.new(0, 130, 0, 165)
bar1.BackgroundColor3 = Color3.fromRGB(80,80,80)

local fill1 = Instance.new("Frame", bar1)
fill1.Size = UDim2.new(0, 0, 1, 0)
fill1.BackgroundColor3 = Color3.fromRGB(0,170,255)

local knob1 = Instance.new("ImageButton", bar1)
knob1.Size = UDim2.new(0, 30, 0, 30)
knob1.Position = UDim2.new(0, -15, 0, -5)
knob1.BackgroundTransparency = 1
knob1.Image = "rbxassetid://3570695787"

bar1.Transparency = 1
fill1.Transparency = 1
knob1.ImageTransparency = 1
knob1.Interactable = false

local label = Instance.new("TextLabel", frame)
label.Text = "Ускорение: 0"
label.Size = UDim2.new(1, 0, 0, 30)
label.Position = UDim2.new(0, 40, 0, 25)
label.BackgroundTransparency = 1
label.TextColor3 = Color3.new(1,1,1)
label.Font = Enum.Font.SourceSansBold
label.TextSize = 22
label.Transparency = 1

local bar = Instance.new("Frame", frame)
bar.Size = UDim2.new(0, 240, 0, 20)
bar.Position = UDim2.new(0, 130, 0, 60)
bar.BackgroundColor3 = Color3.fromRGB(80,80,80)
bar.Transparency = 1

local fill = Instance.new("Frame", bar)
fill.Size = UDim2.new(0, 0, 1, 0)
fill.BackgroundColor3 = Color3.fromRGB(0,170,255)
fill.Transparency = 1

local knob = Instance.new("ImageButton", bar)
knob.Size = UDim2.new(0, 30, 0, 30)
knob.Position = UDim2.new(0, -15, 0, -5)
knob.BackgroundTransparency = 1
knob.ImageTransparency = 1
knob.Image = "rbxassetid://3570695787"
knob.Interactable = false
knob.AutoButtonColor = false

local toggleFullBrightLabel = Instance.new("TextLabel", frame)
toggleFullBrightLabel.Size = UDim2.new(0, 200, 0, 30)
toggleFullBrightLabel.Position = UDim2.new(0, 80, 0, 30)
toggleFullBrightLabel.BackgroundTransparency = 1
toggleFullBrightLabel.TextColor3 = Color3.new(1,1,1)
toggleFullBrightLabel.Font = Enum.Font.SourceSans
toggleFullBrightLabel.TextSize = 18
toggleFullBrightLabel.Text = "FULL BRIGHT(not looped)"

local toggleFullBrightButton = Instance.new("TextButton", frame)
toggleFullBrightButton.Size = UDim2.new(0, 80, 0, 30)
toggleFullBrightButton.Position = UDim2.new(0, 290, 0, 30)
toggleFullBrightButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
toggleFullBrightButton.TextColor3 = Color3.new(1,1,1)
toggleFullBrightButton.Font = Enum.Font.SourceSansBold
toggleFullBrightButton.TextSize = 18
toggleFullBrightButton.Text = "ВКЛ"
gradientforALL:Clone().Parent = toggleFullBrightButton
local uiCorner1 = Instance.new("UICorner")
uiCorner1.CornerRadius = UDim.new(0, 15) -- радиус 15 пикселей
uiCorner1.Parent = toggleFullBrightButton

local toggleNOFESNAKELabel = Instance.new("TextLabel", frame)
toggleNOFESNAKELabel.Size = UDim2.new(0, 200, 0, 30)
toggleNOFESNAKELabel.Position = UDim2.new(0, 80, 0, 30)
toggleNOFESNAKELabel.BackgroundTransparency = 1
toggleNOFESNAKELabel.TextColor3 = Color3.new(1,1,1)
toggleNOFESNAKELabel.Font = Enum.Font.SourceSans
toggleNOFESNAKELabel.TextSize = 18
toggleNOFESNAKELabel.Text = "NO FE SNAKE"

local CreditsLabel = Instance.new("TextLabel", frame)
CreditsLabel.TextWrapped = true
CreditsLabel.Size = UDim2.new(0, 300, 0, 70)
CreditsLabel.Position = UDim2.new(0, 95, 0, 200)
CreditsLabel.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
CreditsLabel.BackgroundTransparency = 1
CreditsLabel.TextColor3 = Color3.new(1,1,1)
CreditsLabel.Font = Enum.Font.SourceSansBold
CreditsLabel.TextSize = 15
CreditsLabel.Text = "По всем вопросам/предложениям что бы ещё добавить в скрипт пишите на мой твинк @Hysagen_Twink, там отвечаю"
CreditsLabel.Transparency = 1

local toggleNOFESNAKEButton = Instance.new("TextButton", frame)
toggleNOFESNAKEButton.Size = UDim2.new(0, 80, 0, 30)
toggleNOFESNAKEButton.Position = UDim2.new(0, 290, 0, 30)
toggleNOFESNAKEButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
toggleNOFESNAKEButton.TextColor3 = Color3.new(1,1,1)
toggleNOFESNAKEButton.Font = Enum.Font.SourceSansBold
toggleNOFESNAKEButton.TextSize = 18
toggleNOFESNAKEButton.Text = "Загрузить"
gradientforALL:Clone().Parent = toggleFullBrightButton
local uiCorner12 = Instance.new("UICorner")
uiCorner12.CornerRadius = UDim.new(0, 15)
uiCorner12.Parent = toggleNOFESNAKEButton
local gradient12 = Instance.new("UIGradient")
gradient12.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(134, 134, 134))
}

toggleNOFESNAKEButton.Transparency = 1
toggleNOFESNAKEButton.Interactable = false
toggleNOFESNAKELabel.Transparency = 1
gradient12.Rotation = 45

gradient12.Transparency = NumberSequence.new{
	NumberSequenceKeypoint.new(0, 0),
	NumberSequenceKeypoint.new(1, 0.3)
}
gradient12.Parent = toggleNOFESNAKEButton

local toggleAUTOBLOCKLabel = Instance.new("TextLabel", frame)
toggleAUTOBLOCKLabel.Size = UDim2.new(0, 200, 0, 30)
toggleAUTOBLOCKLabel.Position = UDim2.new(0, 80, 0, 65)
toggleAUTOBLOCKLabel.BackgroundTransparency = 1
toggleAUTOBLOCKLabel.TextColor3 = Color3.new(1,1,1)
toggleAUTOBLOCKLabel.Font = Enum.Font.SourceSans
toggleAUTOBLOCKLabel.TextSize = 18
toggleAUTOBLOCKLabel.Text = "auto block hub"

local toggleAUTOBLOCKButton = Instance.new("TextButton", frame)
toggleAUTOBLOCKButton.Size = UDim2.new(0, 80, 0, 30)
toggleAUTOBLOCKButton.Position = UDim2.new(0, 290, 0, 65)
toggleAUTOBLOCKButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
toggleAUTOBLOCKButton.TextColor3 = Color3.new(1,1,1)
toggleAUTOBLOCKButton.Font = Enum.Font.SourceSansBold
toggleAUTOBLOCKButton.TextSize = 18
toggleAUTOBLOCKButton.Text = "Загрузить"
gradientforALL:Clone():clone():Clone().Parent = toggleAUTOBLOCKButton
local uiCorner3 = Instance.new("UICorner")
uiCorner3.CornerRadius = UDim.new(0, 15) -- радиус 15 пикселей
uiCorner3.Parent = toggleAUTOBLOCKButton
toggleAUTOBLOCKLabel.TextTransparency = 1
toggleAUTOBLOCKButton.Transparency = 1

local toggleRingPartsLabel = Instance.new("TextLabel", frame)
toggleRingPartsLabel.Size = UDim2.new(0, 200, 0, 30)
toggleRingPartsLabel.Position = UDim2.new(0, 80, 0, 65)
toggleRingPartsLabel.BackgroundTransparency = 1
toggleRingPartsLabel.TextColor3 = Color3.new(1,1,1)
toggleRingPartsLabel.Font = Enum.Font.SourceSans
toggleRingPartsLabel.TextSize = 18
toggleRingPartsLabel.Text = "Ring Parts"
toggleRingPartsLabel.Transparency = 1

local toggleRingPartsButton = Instance.new("TextButton", frame)
toggleRingPartsButton.Size = UDim2.new(0, 80, 0, 30)
toggleRingPartsButton.Position = UDim2.new(0, 290, 0, 65)
toggleRingPartsButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
toggleRingPartsButton.TextColor3 = Color3.new(1,1,1)
toggleRingPartsButton.Font = Enum.Font.SourceSansBold
toggleRingPartsButton.TextSize = 18
toggleRingPartsButton.Text = "Загрузить"
toggleRingPartsButton.Interactable = false
toggleRingPartsButton.Transparency = 1
gradientforALL:Clone():clone():Clone():Clone().Parent = toggleRingPartsButton
local uiCorner4 = Instance.new("UICorner")
uiCorner4.CornerRadius = UDim.new(0, 15) -- радиус 15 пикселей
uiCorner4.Parent = toggleRingPartsButton

local toggleNoFogLabel = Instance.new("TextLabel", frame)
toggleNoFogLabel.Size = UDim2.new(0, 200, 0, 30)
toggleNoFogLabel.Position = UDim2.new(0, 80, 0, 65)
toggleNoFogLabel.BackgroundTransparency = 1
toggleNoFogLabel.TextColor3 = Color3.new(1,1,1)
toggleNoFogLabel.Font = Enum.Font.SourceSans
toggleNoFogLabel.TextSize = 18
toggleNoFogLabel.Text = "NO FOG(not looped)"

local toggleNoFogButton = Instance.new("TextButton", frame)
toggleNoFogButton.Size = UDim2.new(0, 80, 0, 30)
toggleNoFogButton.Position = UDim2.new(0, 290, 0, 65)
toggleNoFogButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
toggleNoFogButton.TextColor3 = Color3.new(1,1,1)
toggleNoFogButton.Font = Enum.Font.SourceSansBold
toggleNoFogButton.TextSize = 18
toggleNoFogButton.Text = "ВКЛ"
gradientforALL:Clone():clone().Parent = toggleNoFogButton
local uiCorner2 = Instance.new("UICorner")
uiCorner2.CornerRadius = UDim.new(0, 15) -- радиус 15 пикселей
uiCorner2.Parent = toggleNoFogButton
local gradientforALL1 = gradientforALL:Clone():Clone():clone()

local toggleNoClipButton = Instance.new("TextButton", frame)
toggleNoClipButton.Size = UDim2.new(0, 80, 0, 30)
toggleNoClipButton.Position = UDim2.new(0, 290, 0, 90)
toggleNoClipButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
toggleNoClipButton.TextColor3 = Color3.new(1,1,1)
toggleNoClipButton.Font = Enum.Font.SourceSansBold
toggleNoClipButton.TextSize = 18
toggleNoClipButton.Text = "ВКЛ"
toggleNoClipButton.Interactable = false
toggleNoClipButton.Transparency = 1
local uiCorner5 = Instance.new("UICorner")
uiCorner5.CornerRadius = UDim.new(0, 15)
uiCorner5.Parent = toggleNoClipButton
gradientforALL1:Clone():Clone().Parent = toggleNoClipButton

local toggleflipscriptLabel = Instance.new("TextLabel", frame)
toggleflipscriptLabel.Size = UDim2.new(0, 200, 0, 30)
toggleflipscriptLabel.Position = UDim2.new(0, 80, 0, 100)
toggleflipscriptLabel.BackgroundTransparency = 1
toggleflipscriptLabel.TextColor3 = Color3.new(1,1,1)
toggleflipscriptLabel.Font = Enum.Font.SourceSans
toggleflipscriptLabel.TextSize = 18
toggleflipscriptLabel.Text = "flip script(F to flip)"
toggleflipscriptLabel.Transparency = 1

local toggleflipscriptButton = Instance.new("TextButton", frame)
toggleflipscriptButton.Size = UDim2.new(0, 80, 0, 30)
toggleflipscriptButton.Position = UDim2.new(0, 290, 0, 100)
toggleflipscriptButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
toggleflipscriptButton.TextColor3 = Color3.new(1,1,1)
toggleflipscriptButton.Font = Enum.Font.SourceSansBold
toggleflipscriptButton.TextSize = 18
toggleflipscriptButton.Text = "Загрузить"
toggleflipscriptButton.Transparency = 1
toggleflipscriptButton.Interactable = false
local uiCorner6 = Instance.new("UICorner")
uiCorner6.CornerRadius = UDim.new(0, 15)
uiCorner6.Parent = toggleflipscriptButton
gradientforALL1:Clone():Clone():Clone():Clone():Clone().Parent = toggleflipscriptButton

local toggleNoClipLabel = Instance.new("TextLabel", frame)
toggleNoClipLabel.Size = UDim2.new(0, 200, 0, 30)
toggleNoClipLabel.Position = UDim2.new(0, 80, 0, 90)
toggleNoClipLabel.BackgroundTransparency = 1
toggleNoClipLabel.TextColor3 = Color3.new(1,1,1)
toggleNoClipLabel.Font = Enum.Font.SourceSans
toggleNoClipLabel.TextSize = 18
toggleNoClipLabel.Text = "NO CLIP: ВЫКЛ"
toggleNoClipLabel.Transparency = 1

local toggleNameLabel = Instance.new("TextLabel", frame)
toggleNameLabel.Size = UDim2.new(0, 200, 0, 30)
toggleNameLabel.Position = UDim2.new(0, 80, 0, 30)
toggleNameLabel.BackgroundTransparency = 1
toggleNameLabel.TextColor3 = Color3.new(1,1,1)
toggleNameLabel.Font = Enum.Font.SourceSans
toggleNameLabel.TextSize = 18
toggleNameLabel.Text = "Подсветка ников: ВЫКЛ"
toggleNameLabel.Transparency = 1

local toggleNameButton = Instance.new("TextButton", frame)
toggleNameButton.Size = UDim2.new(0, 80, 0, 30)
toggleNameButton.Position = UDim2.new(0, 290, 0, 30)
toggleNameButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
toggleNameButton.TextColor3 = Color3.new(1,1,1)
toggleNameButton.Font = Enum.Font.SourceSansBold
toggleNameButton.TextSize = 18
toggleNameButton.Text = "ВКЛ"
toggleNameButton.Transparency = 1
toggleNameButton.Interactable = false
local uiCorner7 = Instance.new("UICorner")
uiCorner7.CornerRadius = UDim.new(0, 15) -- радиус 15 пикселей
uiCorner7.Parent = toggleNameButton
gradientforALL1:Clone():Clone():Clone():Clone().Parent = toggleNameButton

local gradientforALL2 = gradientforALL1:Clone():Clone():Clone():Clone():Clone():Clone():Clone()
gradientforALL2.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(156, 156, 156)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(67, 67, 67))
}

gradientforALL2.Rotation = 45

gradientforALL2.Transparency = NumberSequence.new{
	NumberSequenceKeypoint.new(0, 0),
	NumberSequenceKeypoint.new(1, 0.3)
}

local toggleLabelFLY = Instance.new("TextLabel", frame)
toggleLabelFLY.Size = UDim2.new(0, 200, 0, 30)
toggleLabelFLY.Position = UDim2.new(0, 80, 0, 125)
toggleLabelFLY.BackgroundTransparency = 1
toggleLabelFLY.TextColor3 = Color3.new(1,1,1)
toggleLabelFLY.Font = Enum.Font.SourceSans
toggleLabelFLY.TextSize = 18
toggleLabelFLY.Text = "полет: ВЫКЛ"
toggleLabelFLY.TextTransparency = 1

local toggleflybutton = Instance.new("TextButton", frame)
toggleflybutton.Size = UDim2.new(0, 80, 0, 30)
toggleflybutton.Position = UDim2.new(0, 290, 0, 125)
toggleflybutton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
toggleflybutton.TextColor3 = Color3.new(1,1,1)
toggleflybutton.Font = Enum.Font.SourceSansBold
toggleflybutton.TextSize = 18
toggleflybutton.Text = "ВКЛ"
toggleflybutton.Interactable = false
toggleflybutton.Transparency = 1
local uiCorner123 = Instance.new("UICorner")
uiCorner123.CornerRadius = UDim.new(0, 15) -- радиус 15 пикселей
uiCorner123.Parent = toggleflybutton
local grad = Instance.new("UIGradient")
grad.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(134, 134, 134))
}

-- пример изменения наклона градиента
grad.Rotation = 45 -- угол в градусах

-- можно также менять Transparency (прозрачность) градиента
grad.Transparency = NumberSequence.new{
	NumberSequenceKeypoint.new(0, 0), 
	NumberSequenceKeypoint.new(1, 0)
}
grad.Parent = toggleflybutton

local valueLabel = Instance.new("TextLabel")
valueLabel.Name = "ValueLabel"
valueLabel.Size = UDim2.new(0, 60, 0, 30)
valueLabel.Position = UDim2.new(0, 230, 0, 125)
valueLabel.BackgroundTransparency = 1
valueLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
valueLabel.Font = Enum.Font.SourceSansBold
valueLabel.TextSize = 20
valueLabel.Text = 1
valueLabel.Parent = frame
valueLabel.Transparency = 1

local minValue = 1
local maxValue = 20

local UserInputService = game:GetService("UserInputService")
local sliding = false

UserInputService.InputEnded:Connect(function(input)
	if sliding and input.UserInputType == Enum.UserInputType.MouseButton1 then
		sliding = false
	end
end)

toggleNOFESNAKEButton.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet("https://pastebin.com/raw/gYM0ejM2"))("T.me/AvtorScripts")
	toggleNOFESNAKEButton.Text = "Загружено!"
	wait(0.4)
	toggleNOFESNAKEButton.Text = "Загрузить"
end)

toggleRingPartsButton.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/Hysagen-Hub/universal-GUITEST/refs/heads/main/TEST"))()
	toggleRingPartsButton.Text = "Загружено!"
	wait(0.4)
	toggleRingPartsButton.Text = "Загрузить"
end)

toggleAUTOBLOCKButton.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/skibidi399/Auto-block-script/refs/heads/main/FINAL%20AUTO%20BLOCK"))()
	toggleAUTOBLOCKButton.Text = "Загружено!"
	wait(0.4)
	toggleAUTOBLOCKButton.Text = "Загрузить"
end)

toggleflipscriptButton.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/SHRTRYScriptMANhere/stolenahhfrotflip/refs/heads/main/Flip",true))()
	toggleflipscriptButton.Text = "Загружено!"
	wait(0.4)
	toggleflipscriptButton.Text = "Загрузить"
end)


toggleflybutton.MouseButton1Click:Connect(function()
	if toggleflybutton.Text == "ВКЛ" then
		toggleflybutton.Text = "ВЫКЛ"
		toggleLabelFLY.Text = "полет: ВКЛ"
	else
		toggleflybutton.Text = "ВКЛ"
		toggleLabelFLY.Text = "полет: ВЫКЛ"
	end
end)

toggleflybutton.MouseButton1Click:Connect(function()
	if nowe == true then
		nowe = false
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Climbing,true)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.FallingDown,true)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Flying,true)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Freefall,true)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.GettingUp,true)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Jumping,true)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Landed,true)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Physics,true)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.PlatformStanding,true)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll,true)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Running,true)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.RunningNoPhysics,true)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated,true)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.StrafingNoPhysics,true)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Swimming,true)
		speaker.Character.Humanoid:ChangeState(Enum.HumanoidStateType.RunningNoPhysics)
	else 
		nowe = true

		for i = 1, speeds do
			spawn(function()

				local hb = game:GetService("RunService").Heartbeat	


				tpwalking = true
				local chr = game.Players.LocalPlayer.Character
				local hum = chr and chr:FindFirstChildWhichIsA("Humanoid")
				while tpwalking and hb:Wait() and chr and hum and hum.Parent do
					if hum.MoveDirection.Magnitude > 0 then
						chr:TranslateBy(hum.MoveDirection)
					end
				end

			end)
		end
		if game.Players.LocalPlayer.Character:FindFirstChild("Animate") then
			game.Players.LocalPlayer.Character.Animate.Disabled = true
		end
		local Char = game.Players.LocalPlayer.Character
		local Hum = Char:FindFirstChildOfClass("Humanoid") or Char:FindFirstChildOfClass("AnimationController")

		for i,v in next, Hum:GetPlayingAnimationTracks() do
			v:AdjustSpeed(0)
		end
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Climbing,false)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.FallingDown,false)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Flying,false)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Freefall,false)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.GettingUp,false)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Jumping,false)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Landed,false)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Physics,false)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.PlatformStanding,false)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll,false)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Running,false)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.RunningNoPhysics,false)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated,false)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.StrafingNoPhysics,false)
		speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Swimming,false)
		speaker.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Swimming)
	end

	if game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Humanoid").RigType == Enum.HumanoidRigType.R6 then
		local plr = game.Players.LocalPlayer
		local torso = plr.Character.Torso
		local flying = true
		local deb = true
		local ctrl = {f = 0, b = 0, l = 0, r = 0}
		local lastctrl = {f = 0, b = 0, l = 0, r = 0}
		local maxspeed = 50
		local speed = 0


		local bg = Instance.new("BodyGyro", torso)
		bg.P = 9e4
		bg.maxTorque = Vector3.new(9e9, 9e9, 9e9)
		bg.cframe = torso.CFrame
		local bv = Instance.new("BodyVelocity", torso)
		bv.velocity = Vector3.new(0,0.1,0)
		bv.maxForce = Vector3.new(9e9, 9e9, 9e9)
		if nowe == true then
			plr.Character.Humanoid.PlatformStand = true
		end
		while nowe == true or game:GetService("Players").LocalPlayer.Character.Humanoid.Health == 0 do
			game:GetService("RunService").RenderStepped:Wait()

			if ctrl.l + ctrl.r ~= 0 or ctrl.f + ctrl.b ~= 0 then
				speed = speed+.5+(speed/maxspeed)
				if speed > maxspeed then
					speed = maxspeed
				end
			elseif not (ctrl.l + ctrl.r ~= 0 or ctrl.f + ctrl.b ~= 0) and speed ~= 0 then
				speed = speed-1
				if speed < 0 then
					speed = 0
				end
			end
			if (ctrl.l + ctrl.r) ~= 0 or (ctrl.f + ctrl.b) ~= 0 then
				bv.velocity = ((game.Workspace.CurrentCamera.CoordinateFrame.lookVector * (ctrl.f+ctrl.b)) + ((game.Workspace.CurrentCamera.CoordinateFrame * CFrame.new(ctrl.l+ctrl.r,(ctrl.f+ctrl.b)*.2,0).p) - game.Workspace.CurrentCamera.CoordinateFrame.p))*speed
				lastctrl = {f = ctrl.f, b = ctrl.b, l = ctrl.l, r = ctrl.r}
			elseif (ctrl.l + ctrl.r) == 0 and (ctrl.f + ctrl.b) == 0 and speed ~= 0 then
				bv.velocity = ((game.Workspace.CurrentCamera.CoordinateFrame.lookVector * (lastctrl.f+lastctrl.b)) + ((game.Workspace.CurrentCamera.CoordinateFrame * CFrame.new(lastctrl.l+lastctrl.r,(lastctrl.f+lastctrl.b)*.2,0).p) - game.Workspace.CurrentCamera.CoordinateFrame.p))*speed
			else
				bv.velocity = Vector3.new(0,0,0)
			end
			--	game.Players.LocalPlayer.Character.Animate.Disabled = true
			bg.cframe = game.Workspace.CurrentCamera.CoordinateFrame * CFrame.Angles(-math.rad((ctrl.f+ctrl.b)*50*speed/maxspeed),0,0)
		end
		ctrl = {f = 0, b = 0, l = 0, r = 0}
		lastctrl = {f = 0, b = 0, l = 0, r = 0}
		speed = 0
		bg:Destroy()
		bv:Destroy()
		plr.Character.Humanoid.PlatformStand = false
		if game.Players.LocalPlayer.Character:FindFirstChild("Animate") then
			game.Players.LocalPlayer.Character.Animate.Disabled = false
		end
		tpwalking = false

	else
		local plr = game.Players.LocalPlayer
		local UpperTorso = plr.Character.UpperTorso
		local flying = true
		local deb = true
		local ctrl = {f = 0, b = 0, l = 0, r = 0}
		local lastctrl = {f = 0, b = 0, l = 0, r = 0}
		local maxspeed = 50
		local speed = 0


		local bg = Instance.new("BodyGyro", UpperTorso)
		bg.P = 9e4
		bg.maxTorque = Vector3.new(9e9, 9e9, 9e9)
		bg.cframe = UpperTorso.CFrame
		local bv = Instance.new("BodyVelocity", UpperTorso)
		bv.velocity = Vector3.new(0,0.1,0)
		bv.maxForce = Vector3.new(9e9, 9e9, 9e9)
		if nowe == true then
			plr.Character.Humanoid.PlatformStand = true
		end
		while nowe == true or game:GetService("Players").LocalPlayer.Character.Humanoid.Health == 0 do
			wait()

			if ctrl.l + ctrl.r ~= 0 or ctrl.f + ctrl.b ~= 0 then
				speed = speed+.5+(speed/maxspeed)
				if speed > maxspeed then
					speed = maxspeed
				end
			elseif not (ctrl.l + ctrl.r ~= 0 or ctrl.f + ctrl.b ~= 0) and speed ~= 0 then
				speed = speed-1
				if speed < 0 then
					speed = 0
				end
			end
			if (ctrl.l + ctrl.r) ~= 0 or (ctrl.f + ctrl.b) ~= 0 then
				bv.velocity = ((game.Workspace.CurrentCamera.CoordinateFrame.lookVector * (ctrl.f+ctrl.b)) + ((game.Workspace.CurrentCamera.CoordinateFrame * CFrame.new(ctrl.l+ctrl.r,(ctrl.f+ctrl.b)*.2,0).p) - game.Workspace.CurrentCamera.CoordinateFrame.p))*speed
				lastctrl = {f = ctrl.f, b = ctrl.b, l = ctrl.l, r = ctrl.r}
			elseif (ctrl.l + ctrl.r) == 0 and (ctrl.f + ctrl.b) == 0 and speed ~= 0 then
				bv.velocity = ((game.Workspace.CurrentCamera.CoordinateFrame.lookVector * (lastctrl.f+lastctrl.b)) + ((game.Workspace.CurrentCamera.CoordinateFrame * CFrame.new(lastctrl.l+lastctrl.r,(lastctrl.f+lastctrl.b)*.2,0).p) - game.Workspace.CurrentCamera.CoordinateFrame.p))*speed
			else
				bv.velocity = Vector3.new(0,0,0)
			end

			bg.cframe = game.Workspace.CurrentCamera.CoordinateFrame * CFrame.Angles(-math.rad((ctrl.f+ctrl.b)*50*speed/maxspeed),0,0)
		end
		ctrl = {f = 0, b = 0, l = 0, r = 0}
		lastctrl = {f = 0, b = 0, l = 0, r = 0}
		speed = 0
		bg:Destroy()
		bv:Destroy()
		plr.Character.Humanoid.PlatformStand = false
		if game.Players.LocalPlayer.Character:FindFirstChild("Animate") then
			game.Players.LocalPlayer.Character.Animate.Disabled = false
		end
		tpwalking = false
	end
end)

local togglePage1button = Instance.new("TextButton", frame)
togglePage1button.Size = UDim2.new(0, 80, 0, 30)
togglePage1button.Position = UDim2.new(0, 5, 0, 35)
togglePage1button.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
togglePage1button.TextColor3 = Color3.new(1,1,1)
togglePage1button.Font = Enum.Font.SourceSansBold
togglePage1button.TextSize = 18
togglePage1button.Text = "Visuals"
local uiCorner9 = Instance.new("UICorner")
uiCorner9.CornerRadius = UDim.new(0, 15) -- радиус 15 пикселей
uiCorner9.Parent = togglePage1button
gradientforALL2.Parent = togglePage1button
togglePage1button.TextColor3 = Color3.new(1, 1, 1)

local togglePage2button = Instance.new("TextButton", frame)
togglePage2button.Size = UDim2.new(0, 80, 0, 30)
togglePage2button.Position = UDim2.new(0, 5, 0, 75)
togglePage2button.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
togglePage2button.TextColor3 = Color3.new(1,1,1)
togglePage2button.Font = Enum.Font.SourceSansBold
togglePage2button.TextSize = 18
togglePage2button.Text = "Misc"
local uiCorner10 = Instance.new("UICorner")
uiCorner10.CornerRadius = UDim.new(0, 15) -- радиус 15 пикселей
uiCorner10.Parent = togglePage2button
gradientforALL2:Clone().Parent = togglePage2button

local togglePage3button = Instance.new("TextButton", frame)
togglePage3button.Size = UDim2.new(0, 80, 0, 30)
togglePage3button.Position = UDim2.new(0, 5, 0, 115)
togglePage3button.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
togglePage3button.TextColor3 = Color3.new(1,1,1)
togglePage3button.Font = Enum.Font.SourceSansBold
togglePage3button.TextSize = 18
togglePage3button.Text = "Forsaken"
local uiCorner11 = Instance.new("UICorner")
uiCorner11.CornerRadius = UDim.new(0, 15) -- радиус 15 пикселей
uiCorner11.Parent = togglePage3button
gradientforALL2:Clone():Clone().Parent = togglePage3button

local togglePage4button = Instance.new("TextButton", frame)
togglePage4button.Size = UDim2.new(0, 80, 0, 30)
togglePage4button.Position = UDim2.new(0, 5, 0, 155)
togglePage4button.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
togglePage4button.TextColor3 = Color3.new(1,1,1)
togglePage4button.Font = Enum.Font.SourceSansBold
togglePage4button.TextSize = 18
togglePage4button.Text = "Fun"
local uiCorner12 = Instance.new("UICorner")
uiCorner12.CornerRadius = UDim.new(0, 15) -- радиус 15 пикселей
uiCorner12.Parent = togglePage4button
gradientforALL2:Clone():Clone():Clone().Parent = togglePage4button

local toggleclosebutton = Instance.new("TextButton", frame)
toggleclosebutton.Size = UDim2.new(0, 280, 0, 30)
toggleclosebutton.Position = UDim2.new(0, 100, 0, 240)
toggleclosebutton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
toggleclosebutton.TextColor3 = Color3.new(1,1,1)
toggleclosebutton.Font = Enum.Font.SourceSansBold
toggleclosebutton.TextSize = 18
toggleclosebutton.Text = "закрыть скрипт(script unload)"
toggleclosebutton.Transparency = 1
toggleclosebutton.Interactable = false
local uiCorner11 = Instance.new("UICorner")
uiCorner11.CornerRadius = UDim.new(0, 15) -- радиус 15 пикселей
uiCorner11.Parent = toggleclosebutton
gradientforALL2:Clone():Clone():Clone().Parent = toggleclosebutton

local UserInputService = game:GetService("UserInputService")
local dragging1 = false
local isEnabled = false

togglePage1button.MouseButton1Click:Connect(function()
	toggleNameLabel.TextTransparency = 1
	toggleNameButton.Transparency = 1
	knob.Interactable = false
	label.TextTransparency = 1
	bar.Transparency = 1
	fill.Transparency = 1
	knob.ImageTransparency = 1
	toggleNameButton.Interactable = false
	toggleNoFogLabel.TextTransparency = 0
	toggleNoFogButton.Transparency = 0
	toggleNoFogButton.Interactable = true
	toggleFullBrightButton.Transparency = 0
	toggleFullBrightLabel.TextTransparency = 0
	toggleFullBrightButton.Interactable = true
	toggleNoClipButton.Transparency = 1
	toggleNoClipButton.Interactable = false
	toggleNoClipLabel.TextTransparency = 1
	toggleclosebutton.Transparency = 1
	toggleclosebutton.Interactable = false
	toggleflybutton.Transparency = 1
	toggleflybutton.Interactable = false
	toggleLabelFLY.TextTransparency = 1
	valueLabel.Transparency = 1
	bar1.Transparency = 1
	fill1.Transparency = 1
	knob1.ImageTransparency = 1
	knob1.Interactable = false
	toggleNOFESNAKEButton.Transparency = 1
	toggleNOFESNAKEButton.Interactable = false
	toggleNOFESNAKELabel.Transparency = 1
	CreditsLabel.Transparency = 1
	toggleAUTOBLOCKLabel.TextTransparency = 1
	toggleAUTOBLOCKButton.Transparency = 1
	toggleAUTOBLOCKButton.Interactable = false
	toggleRingPartsLabel.Transparency = 1
	toggleRingPartsButton.Interactable = false
	toggleRingPartsButton.Transparency = 1
	toggleflipscriptLabel.Transparency = 1
	toggleflipscriptButton.Transparency = 1
	toggleflipscriptButton.Interactable = false
end)

togglePage2button.MouseButton1Click:Connect(function()
	toggleNameLabel.Transparency = 1
	toggleNameButton.Transparency = 1
	label.TextTransparency = 0
	bar.Transparency = 0
	fill.Transparency = 0
	knob.ImageTransparency = 0
	knob.Interactable = true
	toggleNameButton.Interactable = false
	toggleNoFogLabel.Transparency = 1
	toggleNoFogButton.Transparency = 1
	toggleNoFogButton.Interactable = false
	toggleFullBrightButton.Transparency = 1
	toggleFullBrightLabel.Transparency = 1
	toggleFullBrightButton.Interactable = false
	toggleNoClipButton.Transparency = 0
	toggleNoClipButton.Interactable = true
	toggleNoClipLabel.TextTransparency = 0
	toggleclosebutton.Transparency = 0
	toggleclosebutton.Interactable = true
	toggleflybutton.Transparency = 0
	toggleflybutton.Interactable = true
	toggleLabelFLY.TextTransparency = 0
	valueLabel.TextTransparency = 0
	bar1.Transparency = 0
	fill1.Transparency = 0
	knob1.ImageTransparency = 0
	knob1.Interactable = true
	toggleNOFESNAKEButton.Transparency = 1
	toggleNOFESNAKEButton.Interactable = false
	toggleNOFESNAKELabel.Transparency = 1
	CreditsLabel.Transparency = 1
	toggleAUTOBLOCKLabel.TextTransparency = 1
	toggleAUTOBLOCKButton.Transparency = 1
	toggleAUTOBLOCKButton.Interactable = false
	toggleRingPartsLabel.Transparency = 1
	toggleRingPartsButton.Interactable = false
	toggleRingPartsButton.Transparency = 1
	toggleflipscriptLabel.Transparency = 1
	toggleflipscriptButton.Transparency = 1
	toggleflipscriptButton.Interactable = false
end)

togglePage3button.MouseButton1Click:Connect(function()
	toggleNameLabel.TextTransparency = 0
	toggleNameButton.Transparency = 0
	toggleNameButton.Interactable = true
	toggleNoFogLabel.Transparency = 1
	toggleNoFogButton.Transparency = 1
	toggleNoFogButton.Interactable = false
	toggleFullBrightButton.Transparency = 1
	toggleFullBrightLabel.Transparency = 1
	toggleFullBrightButton.Interactable = false
	toggleNoClipButton.Transparency = 1
	toggleNoClipButton.Interactable = false
	toggleNoClipLabel.TextTransparency = 1
	knob.Interactable = false
	label.TextTransparency = 1
	bar.Transparency = 1
	fill.Transparency = 1
	knob.ImageTransparency = 1
	toggleclosebutton.Transparency = 1
	toggleclosebutton.Interactable = false
	toggleflybutton.Transparency = 1
	toggleflybutton.Interactable = false
	toggleLabelFLY.TextTransparency = 1
	valueLabel.Transparency = 1
	bar1.Transparency = 1
	fill1.Transparency = 1
	knob1.ImageTransparency = 1
	knob1.Interactable = false
	toggleNOFESNAKEButton.Transparency = 1
	toggleNOFESNAKEButton.Interactable = false
	toggleNOFESNAKELabel.Transparency = 1
	CreditsLabel.Transparency = 1
	toggleAUTOBLOCKLabel.TextTransparency = 0
	toggleAUTOBLOCKButton.Transparency = 0
	toggleAUTOBLOCKButton.Interactable = true
	toggleRingPartsLabel.Transparency = 1
	toggleRingPartsButton.Interactable = false
	toggleRingPartsButton.Transparency = 1
	toggleflipscriptLabel.TextTransparency = 0
	toggleflipscriptButton.Transparency = 0
	toggleflipscriptButton.Interactable = true
end)

togglePage4button.MouseButton1Click:Connect(function()
	toggleNameLabel.TextTransparency = 1
	toggleNameButton.Transparency = 1
	knob.Interactable = false
	label.TextTransparency = 1
	bar.Transparency = 1
	fill.Transparency = 1
	knob.ImageTransparency = 1
	toggleNameButton.Interactable = false
	toggleNoFogLabel.TextTransparency = 1
	toggleNoFogButton.Transparency = 1
	toggleNoFogButton.Interactable = false
	toggleFullBrightButton.Transparency = 1
	toggleFullBrightLabel.TextTransparency = 1
	toggleFullBrightButton.Interactable = false
	toggleNoClipButton.Transparency = 1
	toggleNoClipButton.Interactable = false
	toggleNoClipLabel.TextTransparency = 1
	toggleclosebutton.Transparency = 1
	toggleclosebutton.Interactable = false
	toggleflybutton.Transparency = 1
	toggleflybutton.Interactable = false
	toggleLabelFLY.TextTransparency = 1
	valueLabel.Transparency = 1
	bar1.Transparency = 1
	fill1.Transparency = 1
	knob1.ImageTransparency = 1
	knob1.Interactable = false
	toggleNOFESNAKEButton.Transparency = 0
	toggleNOFESNAKEButton.Interactable = true
	toggleNOFESNAKELabel.TextTransparency = 0
	CreditsLabel.TextTransparency = 0
	toggleAUTOBLOCKLabel.TextTransparency = 1
	toggleAUTOBLOCKButton.Transparency = 1
	toggleAUTOBLOCKButton.Interactable = false
	toggleRingPartsLabel.TextTransparency = 0
	toggleRingPartsButton.Interactable = true
	toggleRingPartsButton.Transparency = 0
	toggleflipscriptLabel.Transparency = 1
	toggleflipscriptButton.Transparency = 1
	toggleflipscriptButton.Interactable = false
end)

toggleNameButton.MouseButton1Click:Connect(function()
	if nameHighlightEnabled then
		disableNameTags()
		toggleNameLabel.Text = "Подсветка ников: ВЫКЛ"
		toggleNameButton.Text = "ВКЛ"
	else
		enableNameTags()
		toggleNameLabel.Text = "Подсветка ников: ВКЛ"
		toggleNameButton.Text = "ВЫКЛ"
	end
end)

closebuttonRE = nil

toggleclosebutton. MouseButton1Click:Connect(function()
	nameHighlightEnabled = false
	espEnabled = false
	closebuttonRE = true
	clearNameTags()
	screenGui:Destroy()
end)

toggleNoFogButton.MouseButton1Click:Connect(function()
	game.Lighting.FogEnd = 100000
	game.Lighting.FogStart = 0
	game.Lighting:FindFirstChild("Atmosphere").Density = 0
end)

toggleNoClipButton.MouseButton1Click:Connect(function()
	noclipEnabled = not noclipEnabled
	noclip()
	if toggleNoClipButton.Text == "ВКЛ" then
		toggleNoClipButton.Text = "ВЫКЛ"
		toggleNoClipLabel.Text = "NO CLIP: ВКЛ"
	else
		toggleNoClipButton.Text = "ВКЛ"
		toggleNoClipLabel.Text = "NO CLIP: ВЫКЛ"
	end
end)

toggleFullBrightButton.MouseButton1Click:Connect(function()
	FB()
end)

knob.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
	end
end)

userInputService.InputChanged:Connect(function(input)
	if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
		local relativeX = math.clamp(input.Position.X - bar.AbsolutePosition.X, 0, bar.AbsoluteSize.X)
		local percent = relativeX / bar.AbsoluteSize.X
		speed = math.floor(percent * 100 + 0.5)
		fill.Size = UDim2.new(percent, 0, 1, 0)
		knob.Position = UDim2.new(percent, -15, 0, -5)
		label.Text = "Ускорение: "..speed
	end
end)

knob1.InputBegan:Connect(function(input2)
	if input2.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging2 = true
	end
end)

userInputService.InputChanged:Connect(function(input2)
	if dragging2 and input2.UserInputType == Enum.UserInputType.MouseMovement then
		local relativeX1 = math.clamp(input2.Position.X - bar1.AbsolutePosition.X, 0, bar1.AbsoluteSize.X)
		local percent1 = relativeX1 / bar1.AbsoluteSize.X
		fill1.Size = UDim2.new(percent1, 0, 1, 0)
		knob1.Position = UDim2.new(percent1, -15, 0, -5)
		speeds = math.floor(percent1 * 20 + 0.5)
		valueLabel.Text = speeds
		if speeds == 0 then
			speeds = 1
			valueLabel.Text = speeds
		end
	end
end)

userInputService.InputEnded:Connect(function(input2)
	if input2.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging2 = false
	end
end)

userInputService.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = false
	end
end)

if player.Character then
	setupCharacter(player.Character)
end

UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if input.KeyCode == Enum.KeyCode.Insert then
		if screenGui.Enabled == true then
			screenGui.Enabled = false
		else
			screenGui.Enabled = true
		end
	end
end)

local sigma = false

player.CharacterAdded:Connect(function(char)
	setupCharacter(char)
	nameTags = {}
	sigma = true
	if game.Players.LocalPlayer.Character:FindFirstChild("Animate") then
		game.Players.LocalPlayer.Character.Animate.Disabled = false
	end
	wait(0.7)
	game.Players.LocalPlayer.Character.Humanoid.PlatformStand = false
	game.Players.LocalPlayer.Character.Animate.Disabled = false
	toggleflybutton.Text = "ВКЛ"
	toggleLabelFLY.Text = "FLY: ВЫКЛ"
end)

local died = false
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

local function getCurrentMapFolder()
	local mapFolder = nil
	if workspace:FindFirstChild("Map") then
		local ingame = workspace.Map:FindFirstChild("Ingame")
		if ingame then
			mapFolder = ingame:FindFirstChild("Map")
		end
	end
	return mapFolder
end

local connections = {}

local function clearConnections()
	for _, conn in ipairs(connections) do
		conn:Disconnect()
	end
	connections = {}
end

local timer = 0

RunService.Heartbeat:Connect(function(deltaTime)
	game.Lighting.FogEnd = 100000
	game.Lighting.FogStart = 0
	game.Lighting.GlobalShadows = false
end)


player.CharacterAdded:Connect(function(char)
	character = char
	humanoid = character:WaitForChild("Humanoid")
	died = false
end)

local dragging = false
local dragStart
local startPos
local dragInput
local tweenInfo = TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

local function update(inputPosition)
	local delta = inputPosition - dragStart
	local newPos = UDim2.new(
		startPos.X.Scale,
		startPos.X.Offset + delta.X,
		startPos.Y.Scale,
		startPos.Y.Offset + delta.Y
	)
	TweenService:Create(frame, tweenInfo, {Position = newPos}):Play()
end

frame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = frame.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

frame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and input == dragInput then
		update(input.Position)
	end
end)
